# –ì—Ä–∞—Ñ –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ –º—É–ª—å—Ç–∏-–∞–≥–µ–Ω—Ç–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏

## –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –≥—Ä–∞—Ñ–∞

```mermaid
graph TD
    START([–ü–æ—á–∞—Ç–æ–∫: –ó–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞]) --> RAG_SEARCH[üîç RAG Search Agent]
    
    RAG_SEARCH --> |–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏| TOOLS1[üìö Tools:<br/>- search_medical_information<br/>- search_medicine_by_name<br/>- get_medicine_full_instruction]
    TOOLS1 --> RAG_SEARCH
    
    RAG_SEARCH --> DECISION{–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ}
    
    DECISION -->|–í—ñ–¥–ø–æ–≤—ñ–¥—å –¥–æ—Å—Ç–∞—Ç–Ω—è<br/>‚úÖ –ù–µ–º–∞—î –º–∞—Ä–∫–µ—Ä–∞ INSUFFICIENT_INFO<br/>‚úÖ –í—ñ–¥–ø–æ–≤—ñ–¥—å > 30 —Å–∏–º–≤–æ–ª—ñ–≤| END1([‚úÖ –ö—ñ–Ω–µ—Ü—å:<br/>–ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å])
    
    DECISION -->|–í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—è<br/>‚ùå –Ñ –º–∞—Ä–∫–µ—Ä INSUFFICIENT_INFO<br/>‚ùå –í—ñ–¥–ø–æ–≤—ñ–¥—å < 30 —Å–∏–º–≤–æ–ª—ñ–≤| EXTRACT[üíä Medicine Extraction Agent]
    
    EXTRACT --> |–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç| TOOL2[üîç Tool:<br/>- search_medicine_by_name]
    TOOL2 --> EXTRACT
    
    EXTRACT --> |–í–∏—Ç—è–≥—É—î Medicine IDs| FULL[üìö Full Instruction Agent]
    
    FULL --> |–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏| TOOLS3[üìö Tools:<br/>- get_medicine_full_instruction<br/>- search_medical_information]
    TOOLS3 --> FULL
    
    FULL --> END2([‚úÖ –ö—ñ–Ω–µ—Ü—å:<br/>–ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –ø–æ–≤–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å])
    
    style START fill:#e1f5ff
    style END1 fill:#d4edda
    style END2 fill:#d4edda
    style RAG_SEARCH fill:#fff3cd
    style EXTRACT fill:#f8d7da
    style FULL fill:#d1ecf1
    style DECISION fill:#ffeaa7
```

## –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –ø—Ä–æ—Ü–µ—Å—É

### 1. üîç RAG Search Agent (–ü–æ—á–∞—Ç–∫–æ–≤–∏–π –∞–≥–µ–Ω—Ç)

**–í—Ö—ñ–¥:**
- `query`: –ó–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `response_language`: –ú–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (English/Ukrainian)

**–ü—Ä–æ—Ü–µ—Å:**
1. –ê–≥–µ–Ω—Ç –æ—Ç—Ä–∏–º—É—î –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –ø–æ—à—É–∫—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó:
   - `search_medical_information`: –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ —É –±–∞–∑—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
   - `search_medicine_by_name`: –ü–æ—à—É–∫ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤ –∑–∞ –Ω–∞–∑–≤–æ—é
   - `get_medicine_full_instruction`: –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
3. –ê–Ω–∞–ª—ñ–∑—É—î –∑–Ω–∞–π–¥–µ–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
4. –ì–µ–Ω–µ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö

**–í–∏—Ö—ñ–¥:**
- `answer`: –í—ñ–¥–ø–æ–≤—ñ–¥—å –∞–≥–µ–Ω—Ç–∞
- `sources`: –°–ø–∏—Å–æ–∫ –¥–∂–µ—Ä–µ–ª (—Ñ–∞–π–ª–∏, chunk IDs)
- `tools_used`: –°–ø–∏—Å–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤

**–£–º–æ–≤–∞ –ø–µ—Ä–µ—Ö–æ–¥—É:**
- –Ø–∫—â–æ –∞–≥–µ–Ω—Ç –Ω–µ –∑–Ω–∞–π—à–æ–≤ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó, –≤—ñ–Ω –¥–æ–¥–∞—î –º–∞—Ä–∫–µ—Ä `[[INSUFFICIENT_INFO]]` –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –ê–±–æ —è–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥—É–∂–µ –∫–æ—Ä–æ—Ç–∫–∞ (< 30 —Å–∏–º–≤–æ–ª—ñ–≤), —Å–∏—Å—Ç–µ–º–∞ –≤–≤–∞–∂–∞—î —ó—ó –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ—é

---

### 2. üîÄ –£–º–æ–≤–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ (Routing Decision)

**–§—É–Ω–∫—Ü—ñ—è:** `should_continue_to_medicine_search()`

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∏:**
1. **–ú–∞—Ä–∫–µ—Ä –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω–æ—Å—Ç—ñ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó:**
   - –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å `[[INSUFFICIENT_INFO]]` —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
   - –¶–µ –º–æ–≤–æ–Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π –º–∞—Ä–∫–µ—Ä, —è–∫–∏–π –∞–≥–µ–Ω—Ç —è–≤–Ω–æ –¥–æ–¥–∞—î

2. **–î–æ–≤–∂–∏–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:**
   - –Ø–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å < 30 —Å–∏–º–≤–æ–ª—ñ–≤, –≤–≤–∞–∂–∞—î—Ç—å—Å—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ—é
   - –¶–µ —Ä–µ–∑–µ—Ä–≤–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –≤–∏–ø–∞–¥–æ–∫, —è–∫—â–æ –∞–≥–µ–Ω—Ç –Ω–µ –¥–æ–¥–∞–≤ –º–∞—Ä–∫–µ—Ä

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **"end"** - —è–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥–æ—Å—Ç–∞—Ç–Ω—è ‚Üí –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É
- ‚û°Ô∏è **"extract_medicines"** - —è–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—è ‚Üí –ø–µ—Ä–µ–π—Ç–∏ –¥–æ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –Ω–∞–∑–≤ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤

---

### 3. üíä Medicine Extraction Agent (–ê–≥–µ–Ω—Ç –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –Ω–∞–∑–≤ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤)

**–í—Ö—ñ–¥:**
- `query`: –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `sources`: –î–∂–µ—Ä–µ–ª–∞ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ (—è–∫—â–æ —î)

**–ü—Ä–æ—Ü–µ—Å:**
1. –ê–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
2. –í–∏—Ç—è–≥—É—î –Ω–∞–∑–≤–∏ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤ –∑ –∑–∞–ø–∏—Ç—É
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:
   - `search_medicine_by_name`: –ü–æ—à—É–∫ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤ —É –±–∞–∑—ñ –∑–∞ –Ω–∞–∑–≤–∞–º–∏
4. –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ Medicine IDs (32-—Å–∏–º–≤–æ–ª—å–Ω—ñ hex-—Ä—è–¥–∫–∏)
5. –ü–æ–≤–µ—Ä—Ç–∞—î —Å–ø–∏—Å–æ–∫ Medicine IDs

**–í–∏—Ö—ñ–¥:**
- `medicine_ids`: –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö Medicine IDs (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `["A1B2C3D4...", "E5F6G7H8..."]`)
- `sources`: –û–Ω–æ–≤–ª–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ –¥–∂–µ—Ä–µ–ª (–¥–æ–¥–∞—é—Ç—å—Å—è –∑–Ω–∞–π–¥–µ–Ω—ñ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∏)

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ú–æ–∂–µ –∑–Ω–∞–π—Ç–∏ –∫—ñ–ª—å–∫–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤, —è–∫—â–æ –≤–æ–Ω–∏ –∑–≥–∞–¥–∞–Ω—ñ –≤ –∑–∞–ø–∏—Ç—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä–µ–≥—É–ª—è—Ä–Ω—ñ –≤–∏—Ä–∞–∑–∏ –¥–ª—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è Medicine IDs –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∞–≥–µ–Ω—Ç–∞

---

### 4. üìö Full Instruction Agent (–ê–≥–µ–Ω—Ç –ø–æ–≤–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π)

**–í—Ö—ñ–¥:**
- `query`: –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `medicine_ids`: –°–ø–∏—Å–æ–∫ Medicine IDs –≤—ñ–¥ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- `response_language`: –ú–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- `sources`: –î–∂–µ—Ä–µ–ª–∞ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –∞–≥–µ–Ω—Ç—ñ–≤

**–ü—Ä–æ—Ü–µ—Å:**
1. –û—Ç—Ä–∏–º—É—î —Å–ø–∏—Å–æ–∫ Medicine IDs
2. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ Medicine ID –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:
   - `get_medicine_full_instruction`: –û—Ç—Ä–∏–º—É—î –≤—Å—ñ chunks —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –ø—Ä–µ–ø–∞—Ä–∞—Ç—É
3. –ê–Ω–∞–ª—ñ–∑—É—î –ø–æ–≤–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –≤—Å—ñ—Ö –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤
4. –ì–µ–Ω–µ—Ä—É—î –∫–æ–º–ø–ª–µ–∫—Å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ–≤–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
5. –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –º–æ–≤–æ—é, –≤–∫–∞–∑–∞–Ω–æ—é –≤ `response_language`

**–í–∏—Ö—ñ–¥:**
- `answer`: –ü–æ–≤–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤—Å—ñ—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
- `sources`: –ü–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ –¥–∂–µ—Ä–µ–ª –∑ —É—Å—ñ—Ö chunks
- `tools_used`: –°–ø–∏—Å–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤

**–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**
- –ú–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∫—ñ–ª—å–∫–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
- –û—Ç—Ä–∏–º—É—î –¥–æ 20 chunks –Ω–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç (–æ–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–µ—Ä–µ–ø–æ–≤–Ω–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É)
- –ö–æ–∂–µ–Ω chunk –æ–±—Ä—ñ–∑–∞—î—Ç—å—Å—è –¥–æ 2000 —Å–∏–º–≤–æ–ª—ñ–≤ –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó —Ç–æ–∫–µ–Ω—ñ–≤

---

## –°—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏ (AgentState)

–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–¥–∞—î —Å—Ç–∞–Ω –º—ñ–∂ –∞–≥–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –æ–±'—î–∫—Ç `AgentState`:

```python
{
    "query": str,              # –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    "answer": str,            # –ü–æ—Ç–æ—á–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
    "medicine_ids": list[str], # –°–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö Medicine IDs
    "agent_used": str,        # –ù–∞–∑–≤–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
    "response_language": str,  # –ú–æ–≤–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (English/Ukrainian)
    "error": str,             # –ü–æ–º–∏–ª–∫–∞ (—è–∫—â–æ —î)
    "sources": list[dict],     # –°–ø–∏—Å–æ–∫ –¥–∂–µ—Ä–µ–ª –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
    "tools_used": list[str]    # –°–ø–∏—Å–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
}
```

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –£—Å–ø—ñ—à–Ω–∏–π –ø–æ—à—É–∫ —É RAG
```
–ó–∞–ø–∏—Ç: "–Ø–∫—ñ –ø–æ–±—ñ—á–Ω—ñ –¥—ñ—ó —É –ø–∞—Ä–∞—Ü–µ—Ç–∞–º–æ–ª—É?"
  ‚Üì
RAG Search Agent ‚Üí –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é ‚Üí –≥–µ–Ω–µ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å
  ‚Üì
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥–æ—Å—Ç–∞—Ç–Ω—è (–Ω–µ–º–∞—î –º–∞—Ä–∫–µ—Ä–∞, > 30 —Å–∏–º–≤–æ–ª—ñ–≤)
  ‚Üì
‚úÖ –ö—ñ–Ω–µ—Ü—å: –ø–æ–≤–µ—Ä—Ç–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è ‚Üí –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø—Ä–µ–ø–∞—Ä–∞—Ç—É
```
–ó–∞–ø–∏—Ç: "–©–æ —Ç–∞–∫–µ –¢–ò–†–û–ö–°–ò–ù?"
  ‚Üì
RAG Search Agent ‚Üí –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –¥–æ—Å—Ç–∞—Ç–Ω—å–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó ‚Üí –¥–æ–¥–∞—î [[INSUFFICIENT_INFO]]
  ‚Üì
–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—è (—î –º–∞—Ä–∫–µ—Ä)
  ‚Üì
Medicine Extraction Agent ‚Üí –≤–∏—Ç—è–≥—É—î "–¢–ò–†–û–ö–°–ò–ù" ‚Üí –∑–Ω–∞—Ö–æ–¥–∏—Ç—å Medicine ID
  ‚Üì
Full Instruction Agent ‚Üí –æ—Ç—Ä–∏–º—É—î –ø–æ–≤–Ω—É —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é ‚Üí –≥–µ–Ω–µ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å
  ‚Üì
‚úÖ –ö—ñ–Ω–µ—Ü—å: –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–≤–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –ö—ñ–ª—å–∫–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤
```
–ó–∞–ø–∏—Ç: "–ü–æ—Ä—ñ–≤–Ω—è–π –¢–ò–†–û–ö–°–ò–ù —Ç–∞ –õ-–¢–ò–†–û–ö–°–ò–ù"
  ‚Üì
RAG Search Agent ‚Üí –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –¥–æ—Å—Ç–∞—Ç–Ω—å–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
  ‚Üì
Medicine Extraction Agent ‚Üí –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –æ–±–∏–¥–≤–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∏ ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î 2 Medicine IDs
  ‚Üì
Full Instruction Agent ‚Üí –æ—Ç—Ä–∏–º—É—î —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –æ–±–æ—Ö ‚Üí –ø–æ—Ä—ñ–≤–Ω—é—î —Ç–∞ –≥–µ–Ω–µ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å
  ‚Üì
‚úÖ –ö—ñ–Ω–µ—Ü—å: –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ä—ñ–≤–Ω—è–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å
```

---

## –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ (Tools)

### 1. search_medical_information
- **–û–ø–∏—Å:** –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ —É –±–∞–∑—ñ –º–µ–¥–∏—á–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π
- **–í—Ö—ñ–¥:** `query` (—Ä—è–¥–æ–∫ –∑–∞–ø–∏—Ç—É), `n_results` (–∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 3)
- **–í–∏—Ö—ñ–¥:** JSON –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–æ—à—É–∫—É (chunks –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏)
- **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:** RAG Search Agent, Full Instruction Agent

### 2. search_medicine_by_name
- **–û–ø–∏—Å:** –ü–æ—à—É–∫ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤ –∑–∞ –Ω–∞–∑–≤–æ—é
- **–í—Ö—ñ–¥:** `medicine_name` (–Ω–∞–∑–≤–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç—É), `n_results` (–∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 3)
- **–í–∏—Ö—ñ–¥:** JSON –∑ Medicine IDs —Ç–∞ –Ω–∞–∑–≤–∞–º–∏ (—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞ —Ç–∞ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∞)
- **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:** RAG Search Agent, Medicine Extraction Agent

### 3. get_medicine_full_instruction
- **–û–ø–∏—Å:** –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö chunks —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ–ø–∞—Ä–∞—Ç—É
- **–í—Ö—ñ–¥:** `medicine_id` (32-—Å–∏–º–≤–æ–ª—å–Ω–∏–π hex ID), `max_chunks` (–º–∞–∫—Å–∏–º—É–º chunks, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 20)
- **–í–∏—Ö—ñ–¥:** JSON –∑ —É—Å—ñ–º–∞ chunks —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
- **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:** RAG Search Agent, Full Instruction Agent

---

## –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É—î –∫–æ–∂–µ–Ω –∫—Ä–æ–∫ –æ–±—Ä–æ–±–∫–∏:

- üöÄ **–ü–æ—á–∞—Ç–æ–∫ –æ–±—Ä–æ–±–∫–∏:** –ó–∞–ø–∏—Ç, –º–æ–≤–∞, –º–æ–¥–µ–ª—å
- üîç **RAG Search:** –ü–æ—à—É–∫ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- üîÄ **–†–æ—É—Ç–∏–Ω–≥:** –†—ñ—à–µ–Ω–Ω—è –ø—Ä–æ –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
- üíä **Medicine Extraction:** –í–∏—Ç—è–≥–Ω—É—Ç—ñ –Ω–∞–∑–≤–∏, –∑–Ω–∞–π–¥–µ–Ω—ñ Medicine IDs
- üìö **Full Instruction:** –û—Ç—Ä–∏–º–∞–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
- ‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è:** –ß–∞—Å –æ–±—Ä–æ–±–∫–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –∞–≥–µ–Ω—Ç–∏ —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏

---

## –ü–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞–∫–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

1. **–ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:** –°–ø–æ—á–∞—Ç–∫—É –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–Ω–∞–π—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —à–≤–∏–¥–∫–æ —á–µ—Ä–µ–∑ RAG –ø–æ—à—É–∫
2. **–¢–æ—á–Ω—ñ—Å—Ç—å:** –Ø–∫—â–æ RAG –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –¥–æ—Å—Ç–∞—Ç–Ω—å–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ–≤–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
3. **–ì–Ω—É—á–∫—ñ—Å—Ç—å:** –ú–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∑–∞–ø–∏—Ç–∏ –ø—Ä–æ –∫—ñ–ª—å–∫–∞ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
4. **–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è:** –ó–±–µ—Ä—ñ–≥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –¥–∂–µ—Ä–µ–ª–∞ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
5. **–ú–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞:** –ü—Ä–∞—Ü—é—î –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –º–æ–≤–∏ –∑–∞–ø–∏—Ç—É —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

